-# body編集のモーダル
%head
  = include_gon
  = javascript_include_tag "application"
.body_modal
  .body_modal__inner
    - if @userbody.nil?
      .body_modal__inner__body.card
        = form_with model: @userbody, method: :post, url: user_user_bodies_path(current_user.id), id: 'new_userbody', class: 'new_userbody', local: true do |f|
          .form_group.m-4
            = f.label :birth_year, '誕生年'
            = f.number_field :birth_year, class: 'form-control'
          .form_group.m-4
            = f.label :gender, '性別'
            = f.select :gender, [['男'],['女']], prompt: '--', class: 'form-control'
          .form_group.m-4
            = f.label :height, '身長'
            = f.number_field :height, step: '0.1', class: 'form-control'
          .form_group.m-4
            = f.label :weight, '体重'
            = f.number_field :weight, class: 'form-control'
          .action.m-5.justify-content-center
            = f.submit '登録する', class: 'btn btn-primary'
            .btn.btn-primary.close_button
              閉じる
    - else
      .body_modal__inner__body.card
        = form_with model: @userbody, method: :patch, url: user_user_body_path(current_user.id,@userbody.id), id: 'new_userbody', class: 'new_userbody', local: true do |f|
          .form_group.m-4
            = f.label :birth_year, '誕生年'
            = f.number_field :birth_year, class: 'form-control'
          .form_group.m-4
            = f.label :gender, '性別'
            = f.select :gender, [['男'],['女']], prompt: '--', class: 'form-control'
          .form_group.m-4
            = f.label :height, '身長'
            = f.number_field :height, step: '0.1', class: 'form-control'
          .form_group.m-4
            = f.label :weight, '体重'
            = f.number_field :weight, class: 'form-control'
          .action.m-5.justify-content-center
            = f.submit '編集する', class: 'btn btn-primary'
            .btn.btn-primary.close_button
              閉じる

    .body_modal__inner__submit_button


.overlay
-# 本文
.row
  .col-2.card.my-5.ml-5.justify-content-center
    .avatar.mt-3
      = image_tag('avatar_default.png')
    .nickname
      %p
        = @user.nickname
    .body.justify-content-center
      .height
        - unless @userbody.nil?
          %p
            = "#{@userbody&.height} cm"
        - else
          %p
            = "--cm"
      .weight.ml-2
        - unless @userbody.nil?
          %p
            = "#{@userbody&.weight} kg"
        - else
          %p
            = "--kg"
      .mt-4
        %h5 BMI
        - unless @userbody.nil?
          %p
            = (@userbody.weight.to_f / (@userbody.height.to_f / 100) ** 2).round(1)
        - else
          %p
            = "--"
      .mt-4
        %h5 適正体重
        - unless @userbody.nil?
          %p
            = "#{((@userbody.height.to_f / 100)**2 * 22).round(1)} kg"
        - else
          %p
            = "-- kg"
      .mt-4
        %h5 基礎代謝
        - unless @userbody.nil?
          %p
            = "#{(66.47 + (13.75 * @userbody.weight.to_f) + (5 * @userbody.height.to_f) - (6.78*(2019 - @userbody.birth_year))).round(0)} kcal"
        - else
          %p
            = '--kcal'
      .btn.btn-primary.my-4#edit_body
        %p 編集する
  .col-7.mt-5.ml-5
    = link_to chest_user_training_records_path, class: 'btn-lg btn-primary mr-2' do
      胸
    = link_to chest_user_training_records_path, class: 'btn-lg btn-primary mr-2' do
      肩
    = link_to chest_user_training_records_path, class: 'btn-lg btn-primary mr-2' do
      腕
    = link_to chest_user_training_records_path, class: 'btn-lg btn-primary mr-2' do
      背中
    = link_to chest_user_training_records_path, class: 'btn-lg btn-primary mr-2' do
      脚
    = link_to chest_user_training_records_path, class: 'btn-lg btn-primary mr-2' do
      有酸素
    %canvas#myChart{height: "400", width: "900", class: 'mt-5'}
